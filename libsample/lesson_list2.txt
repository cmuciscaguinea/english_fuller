import 'package:flutter/material.dart';
import 'package:google_fonts/google_fonts.dart';
import 'lesson_details.dart';

class LessonsList extends StatefulWidget {
  @override
  _LessonsListState createState() => _LessonsListState();
}

class _LessonsListState extends State<LessonsList> {
  final List<String> lessons = [
    'Lesson 1: Alphabets Sounds',
    'Lesson 2: Vowel Letter (Aa)',
    'Lesson 3: Vowel Letter (Ee)',
    'Lesson 4: Vowel Letter (Ii)',
    'Lesson 5: Vowel Letter (Oo)',
    'Lesson 6: Vowel Letter (Uu)',
    'Lesson 7: Hickory Dickory Dock',
    'Lesson 8: Incy Wincy Spider',
    'Lesson 9: Miss Polly had a Dolly',
    'Lesson 10: Rythming Words /al/',
    'Lesson 11: Rythming Words /ar/',
    'Lesson 12: Rythming Words /at/',
    'Lesson 13: Rythming Words /ee/',
    'Lesson 14: Rythming Words /ell/',
    'Lesson 15: Rythming Words /uck/',
    

  ];

  final Set<int> completedLessons = {};

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Colors.green,
        title: Text('The Lessons', style: GoogleFonts.lexendDeca()),
        centerTitle: true,
      ),
      body: ListView.builder(
        padding: const EdgeInsets.all(8.0),
        itemCount: lessons.length,
        itemBuilder: (context, index) {
          bool isCompleted = completedLessons.contains(index + 1);

          return Padding(
            padding: const EdgeInsets.symmetric(vertical: 8.0),
            child: ElevatedButton(
              onPressed: isCompleted
                  ? null // Disable button if the lesson is completed
                  : () async {
                      final result = await Navigator.push(
                        context,
                        MaterialPageRoute(
                          builder: (context) => LessonDetailScreen(lessonNumber: index + 1),
                        ),
                      );

                      // Mark the lesson as completed if returned
                      if (result != null) {
                        setState(() {
                          completedLessons.add(result);
                        });
                      }
                    },
              style: ElevatedButton.styleFrom(
                backgroundColor: Colors.green, // Always green
                padding: EdgeInsets.symmetric(horizontal: 30, vertical: 20),
              ),
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,

                      //   children: [
                      //   Flexible(
                      //     child: Text(
                      //       lessons[index],
                      //       style: GoogleFonts.lexendDeca(
                      //         fontSize: 18,
                      //         color: isCompleted ? Colors.green : Colors.white, // Set text color to green if completed
                      //       ),
                      //       overflow: TextOverflow.ellipsis,
                      //     ),
                      //   ),
                      //   if (isCompleted)
                      //     Icon(
                      //       Icons.check_circle,
                      //       color: Colors.white, // Icon color remains green if completed
                      //       size: 24,
                      //     ),
                      // ],

                children: [
                  Flexible(
                    child: Text(
                      lessons[index],
                      style: GoogleFonts.lexendDeca(fontSize: 18, color: Colors.white, backgroundColor: Colors.green, ),
                      overflow: TextOverflow.ellipsis,
                    ),
                  ),
                  if (isCompleted)
                    Icon(Icons.check_circle, color: Colors.white, size: 24), // Icon size adjustment
                ],

                // children: [
                //   Expanded( // Wrap the text inside Expanded
                //     child: Text(
                //       lessons[index],
                //       style: GoogleFonts.lexendDeca(fontSize: 18, color: Colors.white),
                //       overflow: TextOverflow.ellipsis, // Handle overflow gracefully
                //     ),
                //   ),
                //   if (isCompleted)
                //     Icon(Icons.check_circle, color: Colors.white), // Show check icon for completed lessons
                // ],
              ),
            ),

          );
        },
      ),
    );
  }
}
